<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert Allele Data to TYP Format — allele2typ • SNPutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert Allele Data to TYP Format — allele2typ"><meta name="description" content="This function converts allele genotype data from conversion results into TYP format,
suitable for genetic analysis workflows. It processes SNP genotype data, extracts
processing information from Axiom calls files, and creates formatted output with
proper headers and metadata."><meta property="og:description" content="This function converts allele genotype data from conversion results into TYP format,
suitable for genetic analysis workflows. It processes SNP genotype data, extracts
processing information from Axiom calls files, and creates formatted output with
proper headers and metadata."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SNPutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/introduction-to-SNPutils.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LabeoFD/SNPutils"><span class="fa fab fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert Allele Data to TYP Format</h1>
      <small class="dont-index">Source: <a href="https://github.com/LabeoFD/SNPutils/blob/master/R/allele2typ.R" class="external-link"><code>R/allele2typ.R</code></a></small>
      <div class="d-none name"><code>allele2typ.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function converts allele genotype data from conversion results into TYP format,
suitable for genetic analysis workflows. It processes SNP genotype data, extracts
processing information from Axiom calls files, and creates formatted output with
proper headers and metadata.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">allele2typ</span><span class="op">(</span></span>
<span>  <span class="va">conversion_results</span>,</span>
<span>  <span class="va">calls_file_path</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_file <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save_log <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-conversion-results">conversion_results<a class="anchor" aria-label="anchor" href="#arg-conversion-results"></a></dt>
<dd><p>A list containing conversion results with a 'results' component.
The 'results' component must be a data frame with columns: Sample_ID, probeset_id,
and allele_genotype. Sample_ID can contain .CEL extensions which will be removed.</p></dd>


<dt id="arg-calls-file-path">calls_file_path<a class="anchor" aria-label="anchor" href="#arg-calls-file-path"></a></dt>
<dd><p>Character string specifying the path to the AxiomGT1.calls.txt file
from which processing date information will be extracted. This file must contain the
Affymetrix timestamp header line.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>Character string specifying the output directory path where files will be saved.
Can be absolute or relative path. Required when save_file or save_log is TRUE. Default is NULL.</p></dd>


<dt id="arg-save-file">save_file<a class="anchor" aria-label="anchor" href="#arg-save-file"></a></dt>
<dd><p>Logical indicating whether to save the formatted output as a CSV file.
When TRUE, creates a file named "IFCE_LFR9_TYPEQv1_DDMMYY_XX.csv" where DDMMYY is
the processing date and XX is a sequence number. Default is FALSE.</p></dd>


<dt id="arg-save-log">save_log<a class="anchor" aria-label="anchor" href="#arg-save-log"></a></dt>
<dd><p>Logical indicating whether to save detailed processing logs as a text file.
Creates a corresponding log file with "_log.txt" suffix. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following components:</p><dl><dt>data</dt>
<dd><p>Processed tibble with columns: Sample_ID (without .CEL), SNP_Name,
Allele1_Forward, Allele2_Forward. Ready for further R processing.</p></dd>

<dt>formatted</dt>
<dd><p>Single-column tibble (V1) containing the complete formatted output
with header section and data, suitable for file writing.</p></dd>

<dt>header_info</dt>
<dd><p>Tibble containing metadata information with Parameter and Value columns
including GSGT Version, Processing Date, Content, and sample/SNPounts.</p></dd>

<dt>file_path</dt>
<dd><p>Character string with full path to the saved CSV file, or NULL if
save_file was FALSE or saving failed.</p></dd>

<dt>log_content</dt>
<dd><p>Character vector containing detailed processing log messages for
debugging and verification purposes.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following key operations:</p><ul><li><p>Validates input data structure and required columns</p></li>
<li><p>Removes .CEL extensions from Sample_ID values</p></li>
<li><p>Splits allele_genotype into separate Allele1_Forward and Allele2_Forward columns</p></li>
<li><p>Extracts processing date from Axiom calls file header</p></li>
<li><p>Creates formatted header with metadata (GSGT version, processing date, counts)</p></li>
<li><p>Generates properly formatted CSV output with header section and data section</p></li>
<li><p>Implements file versioning (sequence numbers) to prevent overwrites</p></li>
<li><p>Provides comprehensive error handling and logging</p></li>
</ul><p>The output CSV file structure includes:</p><ul><li><p>header section with metadata as Parameter,Value pairs</p></li>
<li><p>data section with SNP genotype data in proper CSV columns</p></li>
<li><p>Automatic file versioning with sequence numbers (01, 02, 03)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-requirements">Input Requirements<a class="anchor" aria-label="anchor" href="#input-requirements"></a></h2>


<p>The conversion_results$results data frame must contain:</p><ul><li><p>Sample_ID: Sample identifiers (can include .CEL extension)</p></li>
<li><p>probeset_id: SNP probe set identifiers</p></li>
<li><p>allele_genotype: Genotype calls in format "A/T", "G/C", etc.</p></li>
</ul><p>The calls_file_path must point to an Axiom calls filcontaining:</p><ul><li><p>Header line with "#%affymetrix-algorithm-param-apt-time-str" for date extraction</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="file-output">File Output<a class="anchor" aria-label="anchor" href="#file-output"></a></h2>


<p>When save_file = TRUE, creates files with naming convention:</p><ul><li><p>CSV: "IFCE_LFR9_TYPEQv1_DDMMYY_XX.csv"</p></li>
<li><p>Log: "IFCE_LFR9_TYPEQv1_DDMMYY_XX_log.txt"
Where DDMMYY is processing date and XX is sequence number (01-03).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></code> for CSV writing functionality
<code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">parse_date_time</a></code> for date parsing</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic usage - process data without saving</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">allele2typ</span><span class="op">(</span></span></span>
<span class="r-in"><span>  conversion_results <span class="op">=</span> <span class="va">my_conversion_data</span>,</span></span>
<span class="r-in"><span>  calls_file_path <span class="op">=</span> <span class="st">"path/to/AxiomGT1.calls.txt"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access processed data</span></span></span>
<span class="r-in"><span><span class="va">processed_data</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-in"><span><span class="va">header_info</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">header_info</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Save files to output directory</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">allele2typ</span><span class="op">(</span></span></span>
<span class="r-in"><span>  conversion_results <span class="op">=</span> <span class="va">my_conversion_data</span>,</span></span>
<span class="r-in"><span>  calls_file_path <span class="op">=</span> <span class="st">"path/to/AxiomGT1.calls.txt"</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"output/genotypes"</span>,</span></span>
<span class="r-in"><span>  save_file <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  save_log <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check file path and log</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"File saved to:"</span>, <span class="va">result</span><span class="op">$</span><span class="va">file_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Processing log:\n"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">resu</span><span class="op">$</span><span class="va">log_content</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hedia Tnani.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

